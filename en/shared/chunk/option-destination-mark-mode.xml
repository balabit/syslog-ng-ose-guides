<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
<!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
%entities;
]>
<topic xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title>mark-mode()</title>
    <indexterm type="parameter">
        <primary>mark-mode()</primary>
    </indexterm>
    <indexterm>
        <primary>mark_mode()</primary>
    </indexterm>
    <informaltable frame="topbot" colsep="0" rowsep="0">
        <tgroup cols="2">
            <colspec colnum="1" colwidth="80pt"/>
            <tbody>
                <row>
                    <entry>Accepted values:</entry>
                    <entry><userinput>internal</userinput> | <userinput>dst-idle</userinput> | <userinput>host-idle</userinput> | <userinput>periodical</userinput> | <userinput>none</userinput> | <userinput>global</userinput>
                    </entry>
                </row>
                <row>
                    <entry morerows="1">Default:</entry>
                    <entry morerows="1">
                        <para><userinput>internal</userinput> for pipe, program drivers</para>
                        <para><userinput>none</userinput> for file, unix-dgram, unix-stream drivers</para>
                        <para><userinput>global</userinput> for syslog, tcp, udp destinations</para>
                        <para><userinput>host-idle</userinput> for global option</para>
                    </entry>
                </row>
            </tbody>
        </tgroup>
    </informaltable>
    <para><emphasis role="bold">Description:</emphasis> The <parameter>mark-mode()</parameter> option can be set for the following destination drivers: file(), program(), unix-dgram(), unix-stream(), network(), pipe(), syslog() and in global option.</para>
    <itemizedlist>
        <listitem>
            <para><userinput>internal</userinput>: When internal mark mode is selected, internal source should be placed in the log path as this mode does not generate mark by itself at the destination. This mode only yields the mark messages from internal source. This is the mode as <phrase condition="pe">&abbrev; 3.x</phrase><phrase condition="ose">&abbrev; 3.3</phrase> worked. <parameter>MARK</parameter> will be generated by internal source if there was NO traffic on local sources:</para>
            <para><parameter>file()</parameter>, <parameter>pipe()</parameter>, <parameter>unix-stream()</parameter>, <parameter>unix-dgram()</parameter>, <parameter>program()</parameter></para>
        </listitem>
        <listitem>
            <para><userinput>dst-idle</userinput>: Sends <parameter>MARK</parameter> signal if there was NO traffic on destination drivers. <parameter>MARK</parameter> signal from internal source will be dropped.</para>
            <para><parameter>MARK</parameter> signal can be sent by the following destination drivers: <parameter>network()</parameter>, <parameter>syslog()</parameter>, <parameter>program()</parameter>, <parameter>file()</parameter>, <parameter>pipe()</parameter>, <parameter>unix-stream()</parameter>, <parameter>unix-dgram()</parameter>.</para>
        </listitem>
        <listitem>
            <para><userinput>host-idle</userinput>: Sends <parameter>MARK</parameter> signal if there was NO local message on destination drivers. For example <parameter>MARK</parameter> is generated even if messages were received from tcp. <parameter>MARK</parameter> signal from internal source will be dropped.</para>
            <para><parameter>MARK</parameter> signal can be sent by the following destination drivers: <parameter>network()</parameter>, <parameter>syslog()</parameter>, <parameter>program()</parameter>, <parameter>file()</parameter>, <parameter>pipe()</parameter>, <parameter>unix-stream()</parameter>, <parameter>unix-dgram()</parameter>.</para>
        </listitem>
        <listitem>
            <para><userinput>periodical</userinput>: Sends <parameter>MARK</parameter> signal perodically, regardless of traffic on destination driver. <parameter>MARK</parameter> signal from internal source will be dropped.</para>
            <para><parameter>MARK</parameter> signal can be sent by the following destination drivers: <parameter>network()</parameter>, <parameter>syslog()</parameter>, <parameter>program()</parameter>, <parameter>file()</parameter>, <parameter>pipe()</parameter>, <parameter>unix-stream()</parameter>, <parameter>unix-dgram()</parameter>.</para>
        </listitem>
        <listitem>
            <para><userinput>none</userinput>: Destination driver drops all <parameter>MARK</parameter> messages. If an explicit mark-mode() is not given to the drivers where <userinput>none</userinput> is the default value, then <userinput>none</userinput> will be used.</para>
        </listitem>
        <listitem>
            <para><userinput>global</userinput>: Destination driver uses the global <parameter>mark-mode()</parameter> setting. Note that setting the global <parameter>mark-mode()</parameter> to global causes a syntax error in &abbrev;.</para>
        </listitem>
    </itemizedlist>
    <note>
        <para>In case of <userinput>dst-idle</userinput>, <userinput>host-idle</userinput> and <userinput>periodical</userinput>, the <parameter>MARK</parameter> message will not be written in the destination, if it is not open yet.</para>
    </note>
    <para>Available in <phrase condition="pe">&abbrev; 4 LTS</phrase><phrase condition="ose">&abbrev; 3.4</phrase> and later.</para>
</topic>
