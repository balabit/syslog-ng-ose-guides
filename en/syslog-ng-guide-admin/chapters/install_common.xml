<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter 
 [  
 <!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
 %entities;]> 
<chapter xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title/>
    <section>
        <title/>
        <!-- Common sections for .run installing in client and server modes -->
        <procedure xml:id="installer-common">
            <title/>
            <step xml:id="installer_welcome">
                <para>Enable the executable attribute for the installer using the <command>chmod +x syslog-ng-&lt;edition&gt;-&lt;version&gt;-&lt;OS&gt;-&lt;platform&gt;.run</command>, then start the installer as root using the
                        <command>./syslog-ng-&lt;edition&gt;-&lt;version&gt;-&lt;OS&gt;-&lt;platform&gt;.run</command>
                    command. (Note that the exact name of the file depends on the operating system
                    and platform.) Wait until the package is uncompressed and the welcome screen
                    appears, then select <guibutton>Continue</guibutton>.</para>
                <figure>
                    <title>The welcome screen</title>
                    <mediaobject>
                        <imageobject role="html">
                            <imagedata format="PNG" align="center" fileref="installer_welcome.png"/>
                        </imageobject>
                        <imageobject role="fo">
                            <imagedata format="PNG" scale="30"
                                fileref="&imgroot;/installer_welcome.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </step>
            <step xml:id="installer_eula">
                <para><emphasis>Accepting the EULA</emphasis>: You can install syslog-ng only if you
                    understand and accept the terms of the End-User License Agreement (EULA). The
                    full text of the EULA can be displayed during installation by selecting the
                        <guibutton>Show EULA</guibutton> option, and is also available in this guide
                    for convenience at <xref linkend="gpl"/>. Select
                    <guibutton>Accept</guibutton> to accept the EULA and continue the installation. </para>
                <para>If you do not accept the terms of the EULA for some reason, select
                        <guibutton>Reject</guibutton> to cancel installing syslog-ng.</para>
            </step>
            <step xml:id="installer_platform">
                <para><emphasis>Detecting platform and operating system</emphasis>: The installer
                    attempts to automatically detect your oprating system and platform. If the
                    displayed information is correct, select <guibutton>Yes</guibutton>. Otherwise
                    select <guibutton>Exit</guibutton> to abort the installation, and verify that
                    your platform is supported. For a list
                    of supported platforms, see <xref linkend="supported_platforms"/>. If your platform is supported but not detected
                    correctly, contact your local distributor, reseller, or the BalaBit Support
                    Team. For contact details, see <xref linkend="contact_and_support"/>.</para>
                <!-- FIXME mit csinaljon, ha rosszul erzekeli a telepito a platformot? -->
                <figure>
                    <title>Platform detection</title>
                    <mediaobject>
                        <imageobject role="html">
                            <imagedata format="PNG" align="center" fileref="installer_platform.png"
                            />
                        </imageobject>
                        <imageobject role="fo">
                            <imagedata format="PNG" scale="50"
                                fileref="&imgroot;/installer_platform.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </step>
            <step xml:id="installer_upgrade">
                <para><emphasis>Upgrading</emphasis>: The syslog-ng installer can automatically
                    detect if you have previously installed a version of syslog-ng on your system.
                    To use the configuration file of this previous installation, select
                        <guibutton>Yes</guibutton>. To ignore the old configuration file and create
                    a new one, select <guibutton>No</guibutton>.</para>
                <para>Note that if you decide to use your existing configuration file, the installer
                    automatically checks it for syntax error and displays a list of warnings and
                    errors if it finds any problems.</para>
                <figure>
                    <title>Upgrading syslog-ng</title>
                    <mediaobject>
                        <imageobject role="html">
                            <imagedata format="PNG" align="center" fileref="installer_upgrade.png"/>
                        </imageobject>
                        <imageobject role="fo">
                            <imagedata format="PNG" scale="50"
                                fileref="&imgroot;/installer_upgrade.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </step>
            <step xml:id="installer_config">
                <para><emphasis>Generating a new configuration file</emphasis>: The installer
                    displays some questions to generate a new configuration file.</para>
                <substeps>
                    <step>
                        <para><emphasis>Remote sources</emphasis>: Select <guibutton>Yes</guibutton>
                            to accept log messages from the network. TCP, UDP, and SYSLOG messages
                            on every interface will be automatically accepted.</para>
                        <figure>
                            <title>Accepting remote messages</title>
                            <mediaobject>
                                <imageobject role="html">
                                    <imagedata format="PNG" align="center"
                                        fileref="installer_remote_source.png"/>
                                </imageobject>
                                <imageobject role="fo">
                                    <imagedata format="PNG" scale="50"
                                        fileref="&imgroot;/installer_remote_source.png"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </step>
                    <step>
                        <para><emphasis>Remote destinations</emphasis>: Enter the IP address or
                            hostname of your logserver or relay and select
                            <guibutton>OK</guibutton>.</para>
                        <figure>
                            <title>Forwarding messages to the logserver</title>
                            <mediaobject>
                                <imageobject role="html">
                                    <imagedata format="PNG" align="center"
                                        fileref="installer_remote_destination.png"/>
                                </imageobject>
                                <imageobject role="fo">
                                    <imagedata format="PNG" scale="50"
                                        fileref="&imgroot;/installer_remote_destination.png"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </step>
                </substeps>
                <note>
                    <para>Accepting remote messages and forwarding them to a logserver means that
                        syslog-ng will start in relay mode. </para>
                </note>
            </step>
            <step xml:id="installer_path">
                <para>After the installation is finished, add the
                    <filename>/opt/syslog-ng/bin</filename> and
                    <filename>/opt/syslog-ng/sbin</filename> directories to your search PATH
                    environment variable. That way you can use syslog-ng and its related tools
                    without having to specify the full pathname. Add the following line to your
                    shell profile: </para>
                <synopsis>PATH=/opt/syslog-ng/bin:$PATH </synopsis>
            </step>
        </procedure>
        <note xml:id="initscript_logrotate">
            <para>The native logrotation tools do not send a SIGHUP to syslog-ng after rotating the
                log files, causing syslog-ng to write into files already rotated. To solve this
                problem, the syslog-ng init script links the
                <filename>/var/run/syslog.pid</filename> file to syslog-ng's pid. Also, on Linux,
                the <parameter>install.sh</parameter> script symlinks the initscript of the original
                syslog daemon to syslog-ng's initscript.</para>
        </note>

    </section>

</chapter>
