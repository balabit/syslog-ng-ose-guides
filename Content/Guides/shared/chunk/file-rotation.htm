<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="" />
    </head>
<!-- Log Rotation

Log Rotation is a feature of the Logging service that automatically rotates log files when they reach a certain size.

The syslog-ng application can be used to configure log rotation. That includes the configuration of the rotation size and the interval between rotations.


```
destination d_file {
    file(/tmp/temp.log, file-rotation(size(1), interval(daily), dateformat(-%Y-%m-%d), rotate(3)));
};

```

As the plugin will be a destination, it will be configured in the same way as any other destination which includes the configuration of the destination. That includes the configuration of the destination's parameters.

The size parameter defines the size of the log file in megabytes.

The interval parameter defines the interval between rotations.

 -->
    <body>
        <div>
            <h6><a name="top"></a>file-rotation()</h6>
            <MadCap:keyword term="file-rotation()" />
            <p><i style="font-style: normal;">Description:</i> This is a feature of the Logging service that automatically rotates log files when they reach a certain size.
                <span class="Code">file-rotation()</span> is a function that can be used to configure log rotation. That includes the configuration of the rotation size and the interval between rotations.
            </div>
            <div style="width: 100%;" class="Note" cellspacing="0">
                <p class="TableHyphen"><span class="AllNoteStyles">NOTE:</span> The <MadCap:variable name="General.abbrev" /> application must be able to start and restart the external program, and have the necessary permissions to do so. For example, if your host is running AppArmor or <MadCap:variable name="General.selinux" />, you might have to modify your AppArmor or <MadCap:variable name="General.selinux" /> configuration to enable <MadCap:variable name="General.abbrev" /> to execute external applications.</p>
            </div>
            <div>
            <h6>Using the file-rotation() when <MadCap:variable name="General.abbrev" /> starts or stops</h6>
            <p>To execute an external program  when <MadCap:variable name="General.abbrev" /> starts or stops,  use the following options:</p>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1" colspan="2"><i style="font-style: normal;">size()</i>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">non-negative integer</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">N/A</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1" colspan="2">
                            <p><i style="font-style: normal;">Description:</i> Defines the size of the log file in megabytes. <MadCap:variable name="General.abbrev" /> starts. </p>
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1" colspan="2"><i style="font-style: normal;">interval()</i>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">N/A</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1" colspan="2">
                            <p><i style="font-style: normal;">Description:</i> Defines the interval between rotations. The following values are supported:</p>
                            <ul>
                                <li>daily</li>
                                <li>weekly</li>
                                <li>monthly</li>
                            </ul>

                            <MadCap:variable name="General.abbrev" /> stops.</p>
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            </div>
            <div>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1" colspan="2"><i style="font-style: normal;">dateformat()</i>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">N/A</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1" colspan="2">
                            <p><i style="font-style: normal;">Description:</i> Defines the date format used in the log file name. The following values are supported:</p>
                            <ul>
                                <li>
                                    <p>-%Y-%m-%d</p>
                                </li>
                                <li>
                                    <p>-%Y-%m</p>
                                </li>
                                <li>
                                    <p>-%Y</p>
                                </li>
                            </ul> <MadCap:variable name="General.abbrev" /> <MadCap:variable name="General.abbrev" /> reload.</p>
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1" colspan="2"><i style="font-style: normal;">rotate()</i>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">integer</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">N/A</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1" colspan="2">
                            <p><i style="font-style: normal;">Description:</i> Defines the parameter to mention maximum number of rotations</p>
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>

            </div>
            <div class="Example">
                <h6>Example: Using the file-rotation() with a file destination</h6>
                <p>In the following example, the <span class="Code">file-rotation()</span> is used with the <span class="Code">file()</span> destination. The <span class="Code">file()</span> destination is used to write the log messages to a file named <span class="Code">/var/log/syslog</span>. The <span class="Code">file-rotation()</span> is used to rotate the log file every day and to keep the last 7 days of log files.</p>
                <p>The assumption in this example is that the <span class="Code">file-rotation()</span> is used with the <span class="Code">file()</span> destination. The <span class="Code">file()</span> destination is used to write the log messages to a file named <span class="Code">/var/log/syslog</span>. The <span class="Code">file-rotation()</span> is used to rotate the log file every day and to keep the last 7 days of log files.</p>
                destination d_file {
                    file(/tmp/temp.log, file-rotation(size(1), interval(daily), dateformat(-%Y-%m-%d)));
                };</pre>
            </div>
        </body>
    </html>