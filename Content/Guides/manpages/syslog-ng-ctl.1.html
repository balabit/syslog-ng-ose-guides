<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The syslog-ng control tool manual page</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="syslog-ng-ctl-man-page"></a>The syslog-ng control tool manual page</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="refentrytitle"><a href="#syslog-ng-ctl.1">syslog-ng-ctl</a></span><span class="refpurpose"> &#8212; Display message statistics and enable verbose, debug and trace modes in <span class="phrase">syslog-ng Open Source Edition</span> </span></dt></dl></div><div class="refentry"><a name="syslog-ng-ctl.1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>syslog-ng-ctl &#8212; Display message statistics and enable verbose, debug and trace modes in <span class="phrase">syslog-ng Open Source Edition</span> </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl</code>  [command] [options]</p></div></div><div class="refsection"><a name="syslog-ng-ctl-mandescription"></a><h2>Description</h2><p>NOTE: The syslog-ng-ctl application is distributed with the <span class="phrase">syslog-ng Open Source Edition</span> system logging application, and is usually part of the syslog-ng package. The latest version of the syslog-ng application is available at <span class="phrase"><a class="link" href="https://syslog-ng.com" target="_top">syslog-ng page</a></span>.</p><p>This manual page is only an abstract, for the complete documentation of syslog-ng, see the <span class="phrase"><a class="link" href="https://syslog-ng.com/technical-documents" target="_top">syslog-ng Documentation page</a></span>.</p><p>The <span class="command"><strong>syslog-ng-ctl</strong></span> application is a utility that can be used to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>enable/disable various syslog-ng messages for troubleshooting</p></li><li class="listitem"><p>display statistics about the processed messages</p></li><li class="listitem"><p>handling password-protected private keys</p></li><li class="listitem"><p>display the currently running configuration of <span class="phrase">syslog-ng OSE</span></p></li><li class="listitem"><p>reload the configuration of <span class="phrase">syslog-ng OSE</span>.</p></li></ul></div></div><div class="refsection"><a name="syslog-ng-ctl"></a><h2>Enabling troubleshooting messages</h2><div class="cmdsynopsis"><p><code class="command">command</code>  [options]</p></div><p>Use the <span class="command"><strong>syslog-ng-ctl &lt;command&gt; --set=on</strong></span> command to display verbose, trace, or debug messages. If you are trying to solve configuration problems, the verbose (and occasionally trace) messages are usually sufficient. Debug messages are needed mostly for finding software errors. After solving the problem, do not forget to turn these messages off using the <span class="command"><strong>syslog-ng-ctl &lt;command&gt; --set=off</strong></span>. Note that enabling debug messages does not enable verbose and trace messages.</p><p>Use <span class="command"><strong>syslog-ng-ctl &lt;command&gt;</strong></span> without any parameters to display whether the particular type of messages are enabled or not.</p><p>If you need to use a non-standard control socket to access syslog-ng, use the <span class="command"><strong>syslog-ng-ctl &lt;command&gt; --set=on --control=&lt;socket&gt;</strong></span> command to specify the socket to use.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
            <span class="command"><strong>verbose</strong></span>
          </span></dt><dd><p>Print verbose messages. If syslog-ng was started with the <em class="parameter"><code>--stderr</code></em> or <strong class="userinput"><code>-e</code></strong> option, the messages will be sent to stderr. If not specified, syslog-ng will log such messages to its internal source.</p></dd><dt><span class="term">
            <span class="command"><strong>trace</strong></span>
          </span></dt><dd><p>Print trace messages of how messages are processed. If syslog-ng was started with the <em class="parameter"><code>--stderr</code></em> or <strong class="userinput"><code>-e</code></strong> option, the messages will be sent to stderr. If not specified, syslog-ng will log such messages to its internal source.</p></dd><dt><span class="term">
            <span class="command"><strong>debug</strong></span>
          </span></dt><dd><p>Print debug messages. If syslog-ng was started with the <em class="parameter"><code>--stderr</code></em> or <strong class="userinput"><code>-e</code></strong> option, the messages will be sent to stderr. If not specified, syslog-ng will log such messages to its internal source.</p></dd></dl></div><p>Example:</p><pre class="synopsis">syslog-ng-ctl verbose --set=on</pre></div><div class="refsection"><a name="syslog-ng-ctl-query"></a><h2>syslog-ng-ctl query</h2><p>The <span class="phrase">syslog-ng OSE</span> application stores various data, metrics, and statistics in a hash table. Every property has a name and a value. For example:</p><pre class="synopsis">[syslog-ng]
|
|_[destinations]-[network]-[tcp]-&gt;[stats]-&gt;{received=12;dropped=2}
|
|_[sources]-[sql]-[stats]-&gt;{received=501;dropped=0}</pre><p>You can query the nodes of this tree, and also use filters to select the information you need. A query is actually a path in the tree. You can also use the <strong class="userinput"><code>?</code></strong> and <strong class="userinput"><code>*</code></strong> wildcards. For example:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select every property: <strong class="userinput"><code>*</code></strong></p></li><li class="listitem"><p>Select all <strong class="userinput"><code>dropped</code></strong> value from every <strong class="userinput"><code>stats</code></strong> node: <strong class="userinput"><code>*.stats.dropped</code></strong></p></li></ul></div><p>The nodes and properties available in the tree depend on your <span class="phrase">syslog-ng OSE</span> configuration (that is, the sources, destinations, and other objects you have configured), and also on your <em class="parameter"><code>stats-level()</code></em> settings.</p><div class="refsection"><a name="syslog-ng-ctl-query-list"></a><h3>The list command</h3><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl query list</code> </p></div><p>Use the <span class="command"><strong>syslog-ng-ctl query list</strong></span> command to display the list of metrics that <span class="phrase">syslog-ng OSE</span> collects about the processed messages. For details about the displayed metrics, see <a class="link" href="https://syslog-ng.com/documentation" target="_top">The syslog-ng Administrator Guide</a> <a class="xref" href="#">???</a>.</p><p>An example output:</p><pre class="synopsis">center.received.stats.processed
center.queued.stats.processed
destination.java.d_elastic#0.java_dst(ElasticSearch,elasticsearch-syslog-ng-test,t7cde889529c034aea9ec_micek).stats.dropped
destination.java.d_elastic#0.java_dst(ElasticSearch,elasticsearch-syslog-ng-test,t7cde889529c034aea9ec_micek).stats.processed
destination.java.d_elastic#0.java_dst(ElasticSearch,elasticsearch-syslog-ng-test,t7cde889529c034aea9ec_micek).stats.queued
destination.d_elastic.stats.processed
source.s_tcp.stats.processed
source.severity.7.stats.processed
source.severity.0.stats.processed
source.severity.1.stats.processed
source.severity.2.stats.processed
source.severity.3.stats.processed
source.severity.4.stats.processed
source.severity.5.stats.processed
source.severity.6.stats.processed
source.facility.7.stats.processed
source.facility.16.stats.processed
source.facility.8.stats.processed
source.facility.17.stats.processed
source.facility.9.stats.processed
source.facility.18.stats.processed
source.facility.19.stats.processed
source.facility.20.stats.processed
source.facility.0.stats.processed
source.facility.21.stats.processed
source.facility.1.stats.processed
source.facility.10.stats.processed
source.facility.22.stats.processed
source.facility.2.stats.processed
source.facility.11.stats.processed
source.facility.23.stats.processed
source.facility.3.stats.processed
source.facility.12.stats.processed
source.facility.4.stats.processed
source.facility.13.stats.processed
source.facility.5.stats.processed
source.facility.14.stats.processed
source.facility.6.stats.processed
source.facility.15.stats.processed
source.facility.other.stats.processed
global.payload_reallocs.stats.processed
global.msg_clones.stats.processed
global.sdata_updates.stats.processed
tag..source.s_tcp.stats.processed</pre><p>The <span class="command"><strong>syslog-ng-ctl query list</strong></span> command has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
              <span class="command"><strong>--reset</strong></span>
            </span></dt><dd><p>Use <span class="command"><strong>--reset</strong></span> to set the selected counters to 0 after executing the query.</p></dd></dl></div></div><div class="refsection"><a name="syslog-ng-ctl-query-sum"></a><h3>Displaying metrics and statistics</h3><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl query get</code>  [options]</p></div><p>The <span class="command"><strong>syslog-ng-ctl query get &lt;query&gt;</strong></span> command lists the nodes that match the query, and their values.</p><p>For example, the <strong class="userinput"><code>"destination*"</code></strong> query lists the configured destinations, and the metrics related to each destination. An example output:</p><pre class="synopsis">destination.java.d_elastic#0.java_dst(ElasticSearch,elasticsearch-syslog-ng-test,t7cde889529c034aea9ec_micek).stats.dropped=0
destination.java.d_elastic#0.java_dst(ElasticSearch,elasticsearch-syslog-ng-test,t7cde889529c034aea9ec_micek).stats.processed=0
destination.java.d_elastic#0.java_dst(ElasticSearch,elasticsearch-syslog-ng-test,t7cde889529c034aea9ec_micek).stats.queued=0
destination.d_elastic.stats.processed=0</pre><p>The <span class="command"><strong>syslog-ng-ctl query get</strong></span> command has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
              <span class="command"><strong>--sum</strong></span>
            </span></dt><dd><p>Add up the result of each matching node and return only a single number.</p><p>For example, the <strong class="userinput"><code>syslog-ng-ctl query get --sum "destination*.dropped"</code></strong> command displays the number of messages dropped by the <span class="phrase">syslog-ng OSE</span> instance.</p></dd><dt><span class="term">
              <span class="command"><strong>--reset</strong></span>
            </span></dt><dd><p>Use <span class="command"><strong>--reset</strong></span> to set the selected counters to 0 after executing the query.</p></dd></dl></div></div></div><div class="refsection"><a name="syslog-ng-ctl-stats"></a><h2>The stats command</h2><div class="cmdsynopsis"><p><code class="command">stats</code>  [options]</p></div><p>Use the <span class="command"><strong>stats</strong></span> command to display statistics about the processed messages. For details about the displayed statistics, see <a class="link" href="https://syslog-ng.com/documentation" target="_top">The syslog-ng Administrator Guide</a> <a class="xref" href="#">???</a>. The <span class="command"><strong>stats</strong></span> command has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="command"><strong>--control=&lt;socket&gt;</strong></span> or <span class="command"><strong>-c</strong></span>
        </span></dt><dd><p>Specify the socket to use to access syslog-ng. Only needed when using a non-standard socket.</p></dd><dt><span class="term"><span class="command"><strong>--reset=&lt;socket&gt;</strong></span> or <span class="command"><strong>-r</strong></span>
                    </span></dt><dd><p>Reset all statistics to zero, except for the <strong class="userinput"><code>queued</code></strong> counters. (The <strong class="userinput"><code>queued</code></strong> counters show the number of messages in the message queue of the destination driver, waiting to be sent to the destination.)</p></dd></dl></div><p>Example:</p><pre class="synopsis">syslog-ng-ctl stats</pre><p>An example output:</p><pre class="synopsis">src.internal;s_all#0;;a;processed;6445
src.internal;s_all#0;;a;stamp;1268989330
destination;df_auth;;a;processed;404
destination;df_news_dot_notice;;a;processed;0
destination;df_news_dot_err;;a;processed;0
destination;d_ssb;;a;processed;7128
destination;df_uucp;;a;processed;0
source;s_all;;a;processed;7128
destination;df_mail;;a;processed;0
destination;df_user;;a;processed;1
destination;df_daemon;;a;processed;1
destination;df_debug;;a;processed;15
destination;df_messages;;a;processed;54
destination;dp_xconsole;;a;processed;671
dst.tcp;d_network#0;10.50.0.111:514;a;dropped;5080
dst.tcp;d_network#0;10.50.0.111:514;a;processed;7128
dst.tcp;d_network#0;10.50.0.111:514;a;queued;2048
destination;df_syslog;;a;processed;6724
destination;df_facility_dot_warn;;a;processed;0
destination;df_news_dot_crit;;a;processed;0
destination;df_lpr;;a;processed;0
destination;du_all;;a;processed;0
destination;df_facility_dot_info;;a;processed;0
center;;received;a;processed;0
destination;df_kern;;a;processed;70
center;;queued;a;processed;0
destination;df_facility_dot_err;;a;processed;0</pre></div><div class="refsection"><a name="syslog-ng-ctl-credentials"></a><h2>Handling password-protected private keys</h2><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl credentials</code>  [options]</p></div><p>The <span class="command"><strong>syslog-ng-ctl credentials status</strong></span> command allows you to query the status of the private keys that <span class="phrase">syslog-ng OSE</span> uses in the <em class="parameter"><code>network()</code></em> and <em class="parameter"><code>syslog()</code></em> drivers. You can also provide the passphrase for password-protected private keys using the <span class="command"><strong>syslog-ng-ctl credentials add</strong></span> command. For details on using password-protected keys, see <a class="link" href="https://syslog-ng.com/documentation" target="_top">The syslog-ng Administrator Guide</a> <a class="xref" href="#">???</a>.</p><div class="refsection"><a name="idp72215620615360"></a><h3>Displaying the status of private keys</h3><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl credentials status</code>  [options]</p></div><p>The <span class="command"><strong>syslog-ng-ctl credentials status</strong></span> command allows you to query the status of the private keys that <span class="phrase">syslog-ng OSE</span> uses in the <em class="parameter"><code>network()</code></em> and <em class="parameter"><code>syslog()</code></em> drivers. The command returns the list of private keys used, and their status. For example:</p><pre class="synopsis">syslog-ng-ctl credentials status
Secret store status:
/home/user/ssl_test/client-1/client-encrypted.key SUCCESS</pre><p>If the status of a key is PENDING, you must provide the passphrase for the key, otherwise <span class="phrase">syslog-ng OSE</span> cannot use it. The sources and destinations that use these keys will not work until you provide the passwords. Other parts of the <span class="phrase">syslog-ng OSE</span> configuration will be unaffected. You must provide the passphrase of the password-protected keys every time <span class="phrase">syslog-ng OSE</span> is restarted.</p><p>The following log message also notifies you of PENDING passphrases:</p><pre class="synopsis">Waiting for password; keyfile='private.key'</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="command"><strong>--control=&lt;socket&gt;</strong></span> or <span class="command"><strong>-c</strong></span>
        </span></dt><dd><p>Specify the socket to use to access syslog-ng. Only needed when using a non-standard socket.</p></dd></dl></div></div><div class="refsection"><a name="idp72215620627424"></a><h3>Opening password-protected private keys</h3><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl credentials add</code>  [options]</p></div><p>You can add the passphrase to a password-protected private key file using the following command. <span class="phrase">syslog-ng OSE</span> will display a prompt for you to enter the passphrase. We recommend that you use this method.</p><pre class="synopsis">syslog-ng-ctl credentials add --id=&lt;path-to-the-key&gt;</pre><p>Alternatively, you can include the passphrase in the <em class="parameter"><code>--secret</code></em> parameter:</p><pre class="synopsis">syslog-ng-ctl credentials add --id=&lt;path-to-the-key&gt; --secret=&lt;passphrase-of-the-key&gt;</pre><p>Or you can pipe the passphrase to the syslog-ng-ctl command, for example:</p><pre class="synopsis">echo "&lt;passphrase-of-the-key&gt;" | syslog-ng-ctl credentials add --id=&lt;path-to-the-key&gt;</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="command"><strong>--control=&lt;socket&gt;</strong></span> or <span class="command"><strong>-c</strong></span>
        </span></dt><dd><p>Specify the socket to use to access syslog-ng. Only needed when using a non-standard socket.</p></dd><dt><span class="term"><span class="command"><strong>--id=&lt;path-to-the-key&gt;</strong></span> or <span class="command"><strong>-i</strong></span>
                        </span></dt><dd><p>The path to the password-protected private key file. This is the same path that you use in the <em class="parameter"><code>key-file()</code></em> option of the <span class="phrase">syslog-ng OSE</span> configuration file.</p></dd><dt><span class="term"><span class="command"><strong>--secret=&lt;passphrase-of-the-key&gt;</strong></span> or <span class="command"><strong>-s</strong></span>
                        </span></dt><dd><p>The password or passphrase of the private key.</p></dd></dl></div></div></div><div class="refsection"><a name="syslog-ng-ctl-config"></a><h2>Displaying the configuration</h2><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl config</code>  [options]</p></div><p>Use the <span class="command"><strong>syslog-ng-ctl config</strong></span> command to display the configuration that <span class="phrase">syslog-ng OSE</span> is currently running. Note by default, only the content of the main configuration file are displayed, included files are not resolved. To resolve included files and display the entire configuration, use the <span class="command"><strong>syslog-ng-ctl config --preprocess</strong></span> command.</p></div><div class="refsection"><a name="syslog-ng-ctl-reload"></a><h2>Reloading the configuration</h2><div class="cmdsynopsis"><p><code class="command">syslog-ng-ctl reload</code>  [options]</p></div><p>Use the <span class="command"><strong>syslog-ng-ctl reload</strong></span> command to reload the configuration file of <span class="phrase">syslog-ng OSE</span> without having to restart the <span class="phrase">syslog-ng OSE</span> application. The <span class="command"><strong>syslog-ng-ctl reload</strong></span> works like a SIGHUP.</p></div><div class="refsection"><a name="idp72215620652576"></a><h2>Files</h2><p>
        <code class="filename">/opt/syslog-ng/sbin/syslog-ng-ctl</code>
      </p></div><div class="refsection"><a name="idp72215620654160"></a><h2>See also</h2><p>The <span class="phrase"><a class="link" href="https://syslog-ng.com/technical-documents" target="_top">syslog-ng Documentation page</a></span></p><p>
        <a class="link" href="#"><span class="command"><strong>syslog-ng.conf</strong></span>(5)</a>
      </p><p>
        <a class="link" href="#"><span class="command"><strong>syslog-ng</strong></span>(8)</a>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For the detailed documentation of <span class="phrase">syslog-ng OSE</span> see the <span class="phrase"><a class="link" href="https://syslog-ng.com/technical-documents" target="_top">syslog-ng Documentation page</a></span></p><p>If you experience any problems or need help with syslog-ng, visit the <a class="link" href="https://lists.balabit.hu/mailman/listinfo/syslog-ng" target="_top"><span class="command"><strong>syslog-ng mailing list</strong></span></a>.</p><p>For news and notifications about of syslog-ng, visit the <a class="link" href="https://syslog-ng.org/blogs/" target="_top"><span class="command"><strong>syslog-ng blogs</strong></span></a>.</p></div></div><div class="refsection"><a name="idp72215620665520"></a><h2>Author</h2><p>This manual page was written by the Balabit Documentation Team &lt;documentation@balabit.com&gt;.</p></div><div class="refsection"><a name="idp72215620667056"></a><h2>Copyright</h2><p>The authors grant permission to copy, distribute and/or modify this manual page under the terms of the GNU General Public License Version 2 or newer (GPL v2+).</p></div></div></div></body></html>
