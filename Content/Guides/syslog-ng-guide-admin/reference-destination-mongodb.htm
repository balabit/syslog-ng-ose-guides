<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body name="reference-destination-mongodb">
        <h1 name="reference-destination-mongodb"><a name="reference-destination-mongodb"></a>mongodb() destination options</h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;mongodb()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <p>The <span class="Code">mongodb()</span> driver sends messages to a MongoDB database. MongoDB is a schema-free, document-oriented database.</p>
        <MadCap:snippetBlock src="../shared/wnt/note-server-mode-only.flsnp">
        </MadCap:snippetBlock>
        <p>The <span class="Code">mongodb()</span> destination has the following options:</p>
        <div>
            <h6 name="mongodb-option-bulk"><a name="mongodb-option-bulk"></a>bulk()</h6>
            <MadCap:keyword term="bulk()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">yes|no</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">yes</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i>Description:</i> Toggles bulk insertion, setting to <b>no</b> forces the old behavior (each log is inserted one by one into the MongoDB).</p>
            <div class="Note">
                <p class="Hyphenation"><span class="AllNoteStyles">NOTE:</span> Bulk sending is only efficient if the used collection is constant (e.g. not using templates) or the used template does not lead to too many collections switching within a reasonable time range.</p>
            </div>
        </div>
        <div>
            <h6 name="mongodb-option-bulk-unordered"><a name="mongodb-option-bulk-unordered"></a>bulk_unordered()</h6>
            <MadCap:keyword term="bulk()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">yes|no</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">no</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i>Description:</i> Toggles unordered bulk operations.</p>
        </div>
        <div>
            <h6 name="mongodb-option-bulk-bypass-validation"><a name="mongodb-option-bulk-bypass-validation"></a>bulk_bypass_validation()</h6>
            <MadCap:keyword term="bulk()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">yes|no</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">no</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i>Description:</i> Toggles MongoDB bulk operation validation.</p>
        </div>
        <div>
            <h6 name="mongodb-option-collection"><a name="mongodb-option-collection"></a>collection()</h6>
            <MadCap:keyword term="collection()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">messages</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i>Description:</i> The name of the MongoDB collection where the log messages are stored (collections are similar to SQL tables). The <span class="Code">collection()</span> option supports template functions and macros as well.</p>
            <div class="Example">
                <h6>Example: using the mongodb() destination with a template embedded in the collection() option</h6>
                <p>Using the following example configuration, the <span class="Code">mongodb()</span> destination sends incoming messages into separate MongoDB collections (for example, <span class="Code">localhost_messages</span> and <span class="Code">anotherhost_messages</span>) based on the <span class="Code">HOST</span> field of the message :</p><pre><p>mongodb(
  uri("mongodb://host/syslog?wtimeoutMS=10000&amp;socketTimeoutMS=10000&amp;connectTimeoutMS=10000&amp;serverSelectionTimeoutMS=5000")
  <b>collection("${HOST}_messages")</b>
  workers(8)
);</p></pre>
            </div>
            <table cellspacing="0" class="TableStyle-NoteTable_Yellow_DoNotEdit" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css');">
                <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
                <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column2">
                </col>
                <tbody>
                    <tr class="TableStyle-NoteTable_Yellow_DoNotEdit-Body-Body1">
                        <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyB-Column1-Body1">
                            <p>
                                <img src="../../Resources/Images/Common/caution.png" />
                            </p>
                        </td>
                        <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyA-Column2-Body1"><span class="Yellow">Caution: </span>
                            <p>Hazard of data loss! The <MadCap:variable name="General.abbrev"></MadCap:variable> application does not verify that the specified collection name does not contain invalid characters. If you specify a collection with an invalid name, the log messages sent to the MongoDB database will be irrevocably lost without any warning.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <MadCap:snippetBlock src="../shared/option-destination-diskbuffer.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../shared/option-destination-frac-digits.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../shared/option-destination-local-timezone.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../shared/option-destination-log-fifo-size.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../shared/option-destination-on-error.htm">
        </MadCap:snippetBlock>
        <div>
            <MadCap:snippetBlock src="../shared/option-destination-retries.htm">
            </MadCap:snippetBlock>
            <p>For MongoDB operations, <MadCap:variable name="General.abbrev"></MadCap:variable> uses a one-minute timeout: if an operation times out, <MadCap:variable name="General.abbrev"></MadCap:variable> assumes the operation has failed.</p>
        </div>
        <MadCap:snippetBlock src="../shared/option-destination-throttle.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="mongodb-option-uri"><a name="mongodb-option-uri"></a>uri()</h6>
            <MadCap:keyword term="uri()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">mongodb://127.0.0.1:27017/syslog?wtimeoutMS=60000&amp;socketTimeoutMS=60000&amp;connectTimeoutMS=60000</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i>Description:</i> Refer to the <a href="https://docs.mongodb.com/manual/reference/connection-string/">MongoDB URI format documentation</a> for detailed syntax.</p>
        </div>
        <div>
            <MadCap:snippetBlock src="../shared/chunk/destination-option-value-pairs-content.flsnp">
            </MadCap:snippetBlock>
            <MadCap:snippetBlock src="../shared/wnt/note-typehinting.flsnp">
            </MadCap:snippetBlock>
        </div>
        <div>
            <div>
                <h6>workers()</h6>
                <MadCap:keyword term="workers()">
                </MadCap:keyword>
                <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                    <tbody>
                        <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">integer</td>
                        </tr>
                        <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">1
							</td>
                        </tr>
                    </tbody>
                    <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                    </col>
                </table>
                <MadCap:snippetBlock src="../shared/chunk/option-destination-descr-workers-mongodb.flsnp">
                </MadCap:snippetBlock>
            </div>
        </div>
        <div>
            <h6 name="mongodb-option-write-concern"><a name="mongodb-option-write-concern"></a>write_concern()</h6>
            <MadCap:keyword term="bulk()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Accepted values: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">
                            <p>unacked|acked|majority|a number greater than 0</p>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default: 

                            </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">acked</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i>Description:</i> Sets write concern mode of MongoDB operations, both bulk and single.</p>
        </div>
    </body>
</html>