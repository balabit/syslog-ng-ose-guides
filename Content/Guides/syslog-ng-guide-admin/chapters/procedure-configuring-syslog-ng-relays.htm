<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <meta name="description" content="" />
    </head>
    <body name="procedure-configuring-syslog-ng-relays" oldrole="procedure">
        <h1 name="procedure-configuring-syslog-ng-relays">Configuring syslog-ng on relay hosts</h1>
        <MadCap:keyword term="syslog-ng relays:['configuring']">
        </MadCap:keyword>
        <h6 oldrole="formalpara">Purpose:</h6>
        <p>To configure syslog-ng on a relay host, complete the following steps:</p>
        <div><h6 oldrole="formalpara">Steps:</h6>
        <ol oldrole="procedure">
            <li oldrole="step">
                <p>Install the syslog-ng application on the host. For details installing syslog-ng on specific operating systems, see <MadCap:xref href="chapter-install.htm#chapter-install"><span style="color: #04aada;" class="mcFormatColor">Installing syslog-ng</span></MadCap:xref>.</p>
            </li>
            <li oldrole="step">
                <p>Configure the network sources that collect the log messages sent by the clients.</p>
            </li>
            <li oldrole="step">
                <p>Create a network destination that points to the syslog-ng server.</p>
            </li>
            <li oldrole="step">
                <p>Create a log statement connecting the network sources to the syslog-ng server.</p>
            </li>
            <li oldrole="step">
                <p>Configure the local sources that collect the log messages of the relay host.</p>
            </li>
            <li oldrole="step">
                <p>Create a log statement connecting the local sources to the syslog-ng server.</p>
            </li>
            <li oldrole="step">
                <p>Enable the <span class="Code" oldrole="parameter">keep-hostname()</span> and disable the <span class="Code" oldrole="parameter">chain-hostnames()</span> options. (For details on how these options work, see <MadCap:xref href="reference-options.htm#global-options-chain-hostnames"><span style="color: #04aada;" class="mcFormatColor">Global options</span></MadCap:xref>.)</p>
                <table cellspacing="0" class="TableStyle-NoteTable_Blue_DoNotEdit" oldrole="note" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Blue_DoNotEdit.css');">
                    <col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column1" style="width: 0.3in;">
                    </col>
                    <col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column2">
                    </col>
                    <tbody>
                        <tr class="TableStyle-NoteTable_Blue_DoNotEdit-Body-Body1">
                            <td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyB-Column1-Body1">
                                <p>
                                    <img src="../../../Resources/Images/Common/note.png" />
                                </p>
                            </td>
                            <td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyA-Column2-Body1"><span class="AllNoteStyles">NOTE: </span>
                                <p>It is recommended to use these options on your <MadCap:variable name="General.abbrev"></MadCap:variable> server as well.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </li>
            <li oldrole="step">
                <p>Set filters and options (for example TLS encryption) as necessary.</p>
                <MadCap:snippetBlock src="../../shared/wnt/note-relaying-hostname.htm">
                </MadCap:snippetBlock>
                <div class="Example">
                    <h6 name="example-relayconfig" oldrole="example"><a name="example-relayconfig"></a>Example: A simple configuration for relays</h6>
                    <p>The following is a simple configuration file that collects local and incoming log messages and forwards them to a logserver using the IETF-syslog protocol.</p><pre class="Code" oldrole="synopsis">@version: <MadCap:variable name="Version.techversion"></MadCap:variable>
@include "scl.conf"
options {
    time-reap(30);
    mark-freq(10);
    keep-hostname(yes);
    chain-hostnames(no);
};
source s_local {
    system(); internal();
};
source s_network {
    syslog(transport(tcp));
};
destination d_syslog_tcp {
    syslog("192.168.1.5" transport("tcp") port(2010));
};
log {
    source(s_local); source(s_network);
    destination(d_syslog_tcp);
};</pre>
                </div>
            </li>
        </ol></div>
    </body>
</html>