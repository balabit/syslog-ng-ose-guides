<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="" />
    </head>
    <body name="reference-destination-hdfs">
        <h1 name="reference-destination-hdfs"><a name="reference-destination-hdfs"></a>HDFS destination options</h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;hdfs&lt;/span&gt;]">
        </MadCap:keyword>
        <p>The <span class="Code" oldrole="parameter">hdfs</span> destination stores the log messages in files on the Hadoop Distributed File System (HDFS). The <span class="Code" oldrole="parameter">hdfs</span> destination has the following options.</p>
        <p>The following options are required: <span class="Code" oldrole="parameter">hdfs-file()</span>, <span class="Code" oldrole="parameter">hdfs-uri()</span>. Note that to use <span class="Code" oldrole="parameter">hdfs</span>, you must add the following line to the beginning of your <MadCap:variable name="General.abbrev"></MadCap:variable> configuration:</p><pre class="Code">
@include "scl.conf"</pre>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-java-class-path.htm">
        </MadCap:snippetBlock>
        <p>For the <span class="Code" oldrole="parameter">hdfs</span> destination, include the path to the directory where you copied the required libraries (see <MadCap:xref href="destination-hdfs-prerequisites.htm#destination-hdfs-prerequisites"><span style="color: #04aada;" class="mcFormatColor">Prerequisites</span></MadCap:xref>), for example, <span class="Code" oldrole="userinput">client-lib-dir("/opt/syslog-ng/lib/syslog-ng/java-modules/:/opt/hadoop/libs/")</span>.</p>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-diskbuffer.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-frac-digits.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-hdfs-append-enabled.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="hdfs-option-hdfs-archive-dir"><a name="hdfs-option-hdfs-archive-dir"></a>hdfs-archive-dir()</h6>
            <MadCap:keyword term="hdfs-archive-dir():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['hdfs-archive-dir']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The path where <MadCap:variable name="General.abbrev"></MadCap:variable> will move the closed log files. If <MadCap:variable name="General.abbrev"></MadCap:variable> cannot move the file for some reason (for example, <MadCap:variable name="General.abbrev"></MadCap:variable> cannot connect to the HDFS NameNode), the file remains at its original location. For example, <span class="Code" oldrole="userinput">hdfs-archive-dir("/usr/hdfs/archive/")</span>.</p>
            <div cellspacing="0" class="Note" oldrole="note" style="width: 100%;"><span class="AllNoteStyles">NOTE: </span>
                <p>When <span class="Code" oldrole="parameter">hdfs-append-enabled</span> is set to <span class="Code" oldrole="userinput">true</span>, archiving is automatically disabled, and <MadCap:variable name="General.abbrev"></MadCap:variable> will ignore the <span class="Code" oldrole="parameter">hdfs-archive-dir</span> option.</p>
            </div>
        </div>
        <div>
            <h6 name="hdfs-option-hdfs-file"><a name="hdfs-option-hdfs-file"></a>hdfs-file()</h6>
            <MadCap:keyword term="hdfs-file():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['hdfs-file']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The path and name of the log file. For example, <span class="Code" oldrole="userinput">hdfs-file("/usr/hdfs/mylogfile.txt")</span>. <MadCap:variable name="General.abbrev"></MadCap:variable> checks if the path to the logfile exists. If a directory does not exist <MadCap:variable name="General.abbrev"></MadCap:variable> automatically creates it.</p>
            <p><span class="Code" oldrole="parameter">hdfs-file()</span> supports the usage of macros. This means that <MadCap:variable name="General.abbrev"></MadCap:variable> can create files on HDFS dynamically, using macros in the file (or directory) name.</p>
            <div cellspacing="0" class="Note" oldrole="note" style="width: 100%;"><span class="AllNoteStyles">NOTE: </span>
                <p>When a filename resolved from the macros contains a character that HDFS does not support, <MadCap:variable name="General.abbrev"></MadCap:variable> will not be able to create the file. Make sure that you use macros that do not contain unsupported characters.</p>
            </div>
            <div class="Example">
                <h6 oldrole="example">Example: Using macros in filenames</h6>
                <p>In the following example, a <span class="Code" oldrole="filename">/var/testdb_working_dir/$DAY-$HOUR.txt</span> file will be created (with a UUID suffix):</p><pre class="Code">destination d_hdfs_9bf3ff45341643c69bf46bfff940372a {
    hdfs(client-lib-dir(/hdfs-libs)
 hdfs-uri("hdfs://hdp2.syslog-ng.example:8020")
 hdfs-file("/var/testdb_working_dir/$DAY-$HOUR.txt"));
};</pre>
                <p>As an example, if it is the 31st day of the month and it is 12 o'clock, then the name of the file will be <span class="Code" oldrole="filename">31-12.txt</span>.</p>
            </div>
        </div>
        <div>
            <h6 name="hdfs-option-hdfs-max-filename-length"><a name="hdfs-option-hdfs-max-filename-length"></a>hdfs-max-filename-length()</h6>
            <MadCap:keyword term="hdfs-max-filename-length():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['hdfs-max-filename-length']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">number</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">255</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The maximum length of the filename. This filename (including the UUID that <MadCap:variable name="General.abbrev"></MadCap:variable> appends to it) cannot be longer than what the file system permits. If the filename is longer than the value of <span class="Code" oldrole="parameter">hdfs-max-filename-length</span>, <MadCap:variable name="General.abbrev"></MadCap:variable> will automatically truncate the filename. For example, <span class="Code" oldrole="userinput">hdfs-max-filename-length("255")</span>.</p>
        </div>
        <div>
            <h6 name="hdfs-option-hdfs-resources"><a name="hdfs-option-hdfs-resources"></a>hdfs-resources()</h6>
            <MadCap:keyword term="hdfs-resources():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['hdfs-resources']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The list of Hadoop resources to load, separated by semicolons. For example, <span class="Code" oldrole="userinput">hdfs-resources("/home/user/hadoop/core-site.xml;/home/user/hadoop/hdfs-site.xml")</span>.</p>
        </div>
        <div>
            <h6 name="hdfs-option-hdfs-uri"><a name="hdfs-option-hdfs-uri"></a>hdfs-uri()</h6>
            <MadCap:keyword term="hdfs-uri():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['hdfs-uri']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The URI of the HDFS NameNode is in <span class="Code" oldrole="userinput">hdfs://IPaddress:port</span> or <span class="Code" oldrole="userinput">hdfs://hostname:port</span> format. When using MapR-FS, the URI of the MapR-FS NameNode is in <span class="Code" oldrole="userinput">maprfs://IPaddress</span> or <span class="Code" oldrole="userinput">maprfs://hostname</span> format, for example: <span class="Code" oldrole="userinput">maprfs://10.140.32.80</span>. The IP address of the node can be IPv4 or IPv6. For example, <span class="Code" oldrole="userinput">hdfs-uri("hdfs://10.140.32.80:8020")</span>. The IPv6 address must be enclosed in square brackets (<i>[]</i>) as specified by RFC 2732, for example, <span class="Code" oldrole="userinput">hdfs-uri("hdfs://[FEDC:BA98:7654:3210:FEDC:BA98:7654:3210]:8020")</span>.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-hook.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-jvm-options.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="hdfs-option-kerberos-keytab-file"><a name="hdfs-option-kerberos-keytab-file"></a>kerberos-keytab-file()</h6>
            <MadCap:keyword term="kerberos-keytab-file():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['kerberos-keytab-file']">
            </MadCap:keyword>
            <MadCap:keyword term="kerberos:['hdfs']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The path to the Kerberos keytab file that you received from your Kerberos administrator. For example, <span class="Code" oldrole="userinput">kerberos-keytab-file("/opt/syslog-ng/etc/hdfs.headless.keytab")</span>. This option is needed only if you want to authenticate using Kerberos in Hadoop. You also have to set the <a href="reference-destination-hdfs.htm"><span class="Code" oldrole="parameter">hdfs-option-kerberos-principal()</span></a> option. For details on the using Kerberos authentication with the <span class="Code" oldrole="parameter">hdfs()</span> destination, see <MadCap:xref href="destination-hdfs-kerberos-authentication.htm#destination-hdfs-kerberos-authentication"><span style="color: #04aada;" class="mcFormatColor">more</span></MadCap:xref>.</p>
            <MadCap:snippetBlock src="../../shared/chunk/synopsis-hdfs-kerberos-example.htm">
            </MadCap:snippetBlock>
            <p>Available in <MadCap:variable name="General.abbrev"></MadCap:variable> version <MadCap:conditionaltext MadCap:conditions="General.ose">3.10</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.pe">7.0.3</MadCap:conditionaltext> and later.</p>
        </div>
        <div>
            <h6 name="hdfs-option-kerberos-principal"><a name="hdfs-option-kerberos-principal"></a>kerberos-principal()</h6>
            <MadCap:keyword term="kerberos-principal():['hdfs']">
            </MadCap:keyword>
            <MadCap:keyword term="hdfs:['kerberos-principal']">
            </MadCap:keyword>
            <MadCap:keyword term="kerberos:['hdfs']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The Kerberos principal you want to authenticate with. For example, <span class="Code" oldrole="userinput">kerberos-principal("hdfs-user@MYREALM")</span>. This option is needed only if you want to authenticate using Kerberos in Hadoop. You also have to set the <a href="reference-destination-hdfs.htm"><span class="Code" oldrole="parameter">hdfs-option-kerberos-keytab-file()</span></a> option. For details on the using Kerberos authentication with the <span class="Code" oldrole="parameter">hdfs()</span> destination, see <MadCap:xref href="destination-hdfs-kerberos-authentication.htm#destination-hdfs-kerberos-authentication"><span style="color: #04aada;" class="mcFormatColor">more</span></MadCap:xref>.</p>
            <MadCap:snippetBlock src="../../shared/chunk/synopsis-hdfs-kerberos-example.htm">
            </MadCap:snippetBlock>
            <p>Available in <MadCap:variable name="General.abbrev"></MadCap:variable> version <MadCap:conditionaltext MadCap:conditions="General.ose">3.10</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.pe">7.0.3</MadCap:conditionaltext> and later.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-log-fifo-size.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-on-error.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-retries.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-template.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-throttle.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="hdfs-option-time-reap"><a name="hdfs-option-time-reap"></a>time-reap()</h6>
            <MadCap:keyword term="time-reap()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Accepted values:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">number (seconds)</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">0 (disabled)</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The time to wait in seconds before an idle destination file is closed. Note that if <span class="Code" oldrole="parameter">hdfs-archive-dir</span> option is set and <span class="Code" oldrole="userinput">time-reap</span> expires, archiving is triggered for the affected file.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-timezone.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-ts-format.htm">
        </MadCap:snippetBlock>
    </body>
</html>