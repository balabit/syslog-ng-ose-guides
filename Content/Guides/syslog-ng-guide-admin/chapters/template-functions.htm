<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body name="template-functions" oldrole="section">
<h1 name="template-functions">Using template functions</h1>
<MadCap:keyword term="template functions"></MadCap:keyword>
<MadCap:keyword term="templates:['template functions']"></MadCap:keyword>
<p oldrole="para">A template function is a transformation: it modifies the way macros or name-value pairs are expanded. Template functions can be used in template definitions, or when macros are used in the configuration of <MadCap:variable name="General.abbrev"></MadCap:variable>. Template functions use the following syntax:</p>
<pre class="Code" oldrole="synopsis">$(function-name parameter1 parameter2 parameter3 ...)</pre>
<p oldrole="para">For example, the <span class="Code" oldrole="parameter">$(echo)</span> template function simply returns the value of the macro it receives as a parameter, thus <span class="Code" oldrole="userinput">$(echo ${HOST})</span> is equivalent to <span class="Code" oldrole="parameter">${HOST}</span>.</p>
<p oldrole="para">The parameters of template functions are separated by a whitespace character. If you want to use a longer string or multiple macros as a single parameter, enclose the parameter in double-quotes or apostrophes. For example:</p>
<pre class="Code" oldrole="synopsis">$(echo "${HOST} ${PROGRAM} ${PID}")</pre>
<p oldrole="para">Template functions can be nested into each other, so the parameter of a template function can be another template function, like:</p>
<pre class="Code" oldrole="synopsis">$(echo $(echo ${HOST}))</pre>
<p oldrole="para">For details on the available template functions, see the descriptions of the individual template functions in <MadCap:xref href="reference-template-functions.htm#reference-template-functions"></MadCap:xref>.</p>
<p oldrole="para">You can define your own template function as a regular configuration object (for example, to reuse the same function in different places in your configuration).</p>
<h6 oldrole="formalpara">Declaration:</h6>

<pre class="Code" oldrole="synopsis">template-function &lt;name-of-the-template-function&gt; "&lt;template-expression-using-strings-macros-template-functions&gt;";</pre>

<h6 oldrole="example">Example: Using custom template functions</h6>
<p oldrole="para">The following template function can be used to reformat the message. It adds the length of the message to the message template.</p>
<pre class="Code" oldrole="synopsis">
template-function my-template-function "${ISODATE} ${HOST} message-length=$(length "${MSG}") ${MESSAGE}";
destination d_file {
	file("/tmp/mylogs.log" template("$(my-template-function)\n")); };</pre>
<p oldrole="para">You can also refer to existing templates in your template function.</p>
<pre class="Code" oldrole="synopsis">
template my-custom-header-template "${ISODATE} ${HOST_FROM} ${MSGHDR}";
template-function my-template-function "$(my-custom-header-template) message-length=$(length "${MESSAGE}") ${MESSAGE}";</pre>

</body></html>
