<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="" />
    </head>
    <body name="reference-destination-kafka">
        <h1 name="reference-destination-kafka"><a name="reference-destination-kafka"></a>Kafka destination options</h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;kafka&lt;/span&gt;]">
        </MadCap:keyword>
        <p>The <span class="Code" oldrole="parameter">kafka</span> destination of <MadCap:variable name="General.abbrev"></MadCap:variable> can directly publish log messages to the <a href="http://kafka.apache.org">Apache Kafka</a> message bus, where subscribers can access them. The <span class="Code" oldrole="parameter">kafka</span> destination has the following options.</p>
        <div>
            <h6>Required options:</h6>
            <p>The following options are required: <span class="Code" oldrole="parameter">kafka-bootstrap-servers()</span>, <span class="Code" oldrole="parameter">topic()</span>. Note that to use <span class="Code" oldrole="parameter">kafka</span>, you must add the following lines to the beginning of your <MadCap:variable name="General.abbrev"></MadCap:variable> configuration:</p><pre>
@include "scl.conf"</pre>
        </div>
        <div>
            <MadCap:snippetBlock src="../../shared/chunk/option-destination-java-class-path.htm">
            </MadCap:snippetBlock>
            <p>For the <span class="Code" oldrole="parameter">kafka</span> destination, include the path to the directory where you copied the required libraries (see <MadCap:xref href="destination-kafka-prerequisites.htm#destination-kafka-prerequisites"><span style="color: #04aada;" class="mcFormatColor">Prerequisites</span></MadCap:xref>), for example, <span class="Code" oldrole="userinput">client-lib-dir("/opt/syslog-ng/lib/syslog-ng/java-modules/KafkaDestination.jar:/usr/share/kafka/lib/*.jar")</span>.</p>
        </div>
        <div>
            <h6 name="kafka-option-kafka-bootstrap-servers"><a name="kafka-option-kafka-bootstrap-servers"></a>kafka-bootstrap-servers()</h6>
            <MadCap:keyword term="kafka-bootstrap-servers():['kafka']">
            </MadCap:keyword>
            <MadCap:keyword term="kafka:['kafka-bootstrap-servers()']">
            </MadCap:keyword>
            <MadCap:keyword term="kafka:['server']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">list of hostnames</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> Specifies the hostname or IP address of the Kafka server. When specifying an IP address, IPv4 (for example, <span class="Code" oldrole="userinput">192.168.0.1</span>) or IPv6 (for example, <span class="Code" oldrole="userinput">[::1]</span>) can be used as well. Use a colon (<span class="Code" oldrole="userinput">:</span>) after the address to specify the port number of the server. When specifying multiple addresses, use a comma to separate the addresses, for example, <span class="Code" oldrole="userinput">kafka-bootstrap-servers("127.0.0.1:2525,remote-server-hostname:6464")</span></p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-frac-digits.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-hook.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-jvm-options.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-on-error.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="kafka-option-key"><a name="kafka-option-key"></a>key()</h6>
            <MadCap:keyword term="key():['kafka']">
            </MadCap:keyword>
            <MadCap:keyword term="kafka:['key']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">template</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The key of the partition under which the message is published. You can use templates to change the topic dynamically based on the source or the content of the message, for example, <span class="Code" oldrole="userinput">key("${PROGRAM}")</span>.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-log-fifo-size.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="kafka-option-properties-file"><a name="kafka-option-properties-file"></a>properties-file()</h6>
            <MadCap:keyword term="properties-file():['kafka']">
            </MadCap:keyword>
            <MadCap:keyword term="properties-file:['resource']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string (absolute path)</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The absolute path and filename of the Kafka properties file to load. For example, <span class="Code" oldrole="userinput">properties-file("/opt/syslog-ng/etc/kafka_dest.properties")</span>. The <MadCap:variable name="General.abbrev"></MadCap:variable> application reads this file and passes the properties to the Kafka Producer. If a property is defined both in the <MadCap:variable name="General.abbrev"></MadCap:variable> configuration file (<span class="Code" oldrole="filename">syslog-ng.conf</span>) and in the properties file, then <MadCap:variable name="General.abbrev"></MadCap:variable> uses the definition from the <MadCap:variable name="General.abbrev"></MadCap:variable> configuration file.</p>
            <p>The <MadCap:variable name="General.abbrev"></MadCap:variable> <span class="Code" oldrole="parameter">kafka</span> destination supports all properties of the official Kafka producer. For details, see the <a href="http://kafka.apache.org/documentation.html#newproducerconfigs">Apache Kafka documentation</a>.</p>
            <p>The <span class="Code" oldrole="parameter">kafka-bootstrap-servers</span> option is translated to the <span class="Code" oldrole="userinput">bootstrap.servers</span> property.</p>
            <p>For example, the following properties file defines the acknowledgment method and compression:</p><pre>acks=all
compression.type=snappy</pre>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-retries.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="kafka-option-sync-send"><a name="kafka-option-sync-send"></a>sync-send()</h6>
            <MadCap:keyword term="sync-send():['kafka']">
            </MadCap:keyword>
            <MadCap:keyword term="kafka:['sync-send']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">true | false</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">false</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> When <span class="Code" oldrole="parameter">sync-send</span> is set to <span class="Code" oldrole="userinput">true</span>, <MadCap:variable name="General.abbrev"></MadCap:variable> sends the message reliably: it sends a message to the Kafka server, then waits for a reply. In case of failure, <MadCap:variable name="General.abbrev"></MadCap:variable> repeats sending the message, as set in the <span class="Code" oldrole="parameter">retries()</span> parameter. If sending the message fails for <span class="Code" oldrole="parameter">retries()</span> times, <MadCap:variable name="General.abbrev"></MadCap:variable> drops the message.</p>
            <p>This method ensures reliable message transfer, but is very slow.</p>
            <p>When <span class="Code" oldrole="parameter">sync-send</span> is set to <span class="Code" oldrole="userinput">false</span>, <MadCap:variable name="General.abbrev"></MadCap:variable> sends messages asynchronously, and receives the response asynchronously. In case of a problem, <MadCap:variable name="General.abbrev"></MadCap:variable> cannot resend the messages.</p>
            <p>This method is fast, but the transfer is not reliable. Several thousands of messages can be lost before <MadCap:variable name="General.abbrev"></MadCap:variable> recognizes the error.</p>
        </div>
        <div>
            <h6 name="kafka-option-template"><a name="kafka-option-template"></a>template()</h6>
            <MadCap:keyword term="message-template():['kafka']">
            </MadCap:keyword>
            <MadCap:keyword term="kafka:['template']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">template or template function</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">$ISODATE $HOST $MSGHDR$MSG\n</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The message as published to Apache Kafka. You can use templates and template functions (for example, <span class="Code" oldrole="parameter">format-json()</span>) to format the message, for example, <span class="Code" oldrole="userinput">template("$(format-json --scope rfc5424 --exclude DATE --key ISODATE)")</span>.</p>
            <p>For details on formatting messages in JSON format, see <MadCap:xref href="reference-template-functions.htm#template-function-format-json"><span style="color: #04aada;" class="mcFormatColor">format-json</span></MadCap:xref>.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-throttle.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="kafka-option-kafka-topic"><a name="kafka-option-kafka-topic"></a>topic()</h6>
            <MadCap:keyword term="topic():['kafka']">
            </MadCap:keyword>
            <MadCap:keyword term="kafka:['topic']">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">template</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">N/A</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p><i role="bold" style="font-style: normal;">Description:</i> The Kafka topic under which the message is published. You can use templates to change the topic dynamically based on the source or the content of the message, for example, <span class="Code" oldrole="userinput">topic("${HOST}")</span>.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-timezone.htm">
        </MadCap:snippetBlock>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-ts-format.htm">
        </MadCap:snippetBlock>
    </body>
</html>