<?xml version="1.0" encoding="UTF-8"?>

<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body condition="ose" name="configuring-destinations-http" oldrole="section">
<h1 condition="ose" name="configuring-destinations-http" version="5.0" xmlns="http://docbook.org/ns/docbook">Posting messages over HTTP</h1>
<MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']"></MadCap:keyword>
<MadCap:keyword term='destination drivers:[&lt;span class="Code" oldrole="parameter"&gt;http&lt;/span&gt;]'></MadCap:keyword>
<p oldrole="para">Version <MadCap:conditionaltext MadCap:conditions="ose">3.7</MadCap:conditionaltext> of <MadCap:variable name="General.abbrev"></MadCap:variable> can directly post log messages to web services using the HTTP protocol. Error and status messages received from the HTTP server are forwarded to the internal logs of <MadCap:variable name="General.abbrev"></MadCap:variable>. The current implementation has the following limitations:</p>
<ul oldrole="itemizedlist">
<MadCap:snippetBlock src="../../shared/chunk/listitem-java-supported-platforms.htm"></MadCap:snippetBlock>
<li oldrole="listitem">
<p oldrole="para">Only HTTP connections are supported, HTTPS is not.</p>
</li>
<li oldrole="listitem">
<p oldrole="para">This destination requires Java. For an <span class="Code" oldrole="parameter">http</span> destination that does not use Java, see <MadCap:xref href="destination-http-nonjava.htm#configuring-destinations-http-nonjava"></MadCap:xref>.</p>
</li>
</ul>
<h6 oldrole="formalpara">Declaration:</h6>

<pre class="Code" oldrole="synopsis">@module mod-java

java(
    class-path("/syslog-ng/install_dir/lib/syslog-ng/java-modules/*.jar")
    class-name("org.syslog_ng.http.HTTPDestination")

    option("url", "http://&lt;server-address&gt;:&lt;port-number&gt;")

);</pre>

<h6 name="example-destination-http" oldrole="example">Example: Sending log data to a web service</h6>
<p oldrole="para">The following example defines an <span class="Code" oldrole="parameter">http</span> destination.</p>
<pre class="Code" oldrole="synopsis">@module mod-java

destination d_http {
    java(
        class-path("/syslog-ng/install_dir/lib/syslog-ng/java-modules/*.jar")
        class-name("org.syslog_ng.http.HTTPDestination")

        option("url", "http://192.168.1.1:80")
    );
};

log
    { source(s_file); destination(d_http); flags(flow-control); };
</pre>

<h2 name="reference-destination-http">HTTP destination options</h2>
<MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']"></MadCap:keyword>
<MadCap:keyword term='destination drivers:[&lt;span class="Code" oldrole="parameter"&gt;http&lt;/span&gt;]'></MadCap:keyword>
<p oldrole="para">The <span class="Code" oldrole="parameter">http</span> destination of <MadCap:variable name="General.abbrev"></MadCap:variable> can directly post log messages to web services using the HTTP protocol. The <span class="Code" oldrole="parameter">http</span> destination has the following options. Some of these options are directly used by the Java code underlying the <span class="Code" oldrole="parameter">http</span> destination, therefore these options must be specified in the following format:</p>
<pre class="Code" oldrole="synopsis">option("&lt;option-name&gt;", "&lt;option-value&gt;")</pre>
<p oldrole="para">For example, <span class="Code" oldrole="userinput">option("url", "http://&lt;server-address&gt;:&lt;port-number&gt;")</span>. The exact format to use is indicated in the description of the option.</p>
<h6 oldrole="formalpara">Required options:</h6>

<p oldrole="para">The following options are required: <span class="Code" oldrole="parameter">url()</span>. Note that to use <span class="Code" oldrole="parameter">http</span>, you must add the following line to the beginning of your <MadCap:variable name="General.abbrev"></MadCap:variable> configuration:</p>
<pre class="Code" oldrole="synopsis">@module mod-java</pre>

<MadCap:snippetBlock src="../../shared/chunk/option-destination-java-class-name.htm"></MadCap:snippetBlock>
<p oldrole="para">For the <span class="Code" oldrole="parameter">http</span> destination, use this option as <span class="Code" oldrole="userinput">class-name("org.syslog_ng.http.HTTPDestination")</span>.</p>


<MadCap:snippetBlock src="../../shared/chunk/option-destination-java-class-path.htm"></MadCap:snippetBlock>
<p oldrole="para">For the <span class="Code" oldrole="parameter">http</span> destination, include the path to the java modules of <MadCap:variable name="General.abbrev"></MadCap:variable>, for example, <span class="Code" oldrole="userinput">class-path("/syslog-ng/install_dir/lib/syslog-ng/java-modules/*.jar")</span>.</p>


<MadCap:snippetBlock src="../../shared/chunk/option-destination-jvm-options.htm"></MadCap:snippetBlock>


<MadCap:snippetBlock src="../../shared/chunk/option-destination-log-fifo-size.htm"></MadCap:snippetBlock>


<h6 name="http-option-method" oldrole="simplesect">method()</h6>
<MadCap:keyword term="method():['http']"></MadCap:keyword>
<MadCap:keyword term="http:['method']"></MadCap:keyword>
<table cellspacing="0" class="RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">


<tbody>
<tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">Type:</td>
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">DELETE | HEAD | GET | OPTIONS | POST | PUT | TRACE</td>
</tr>
<tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">Default:</td>
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">PUT</td>
</tr>
</tbody>

<col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;"></col></table>
<p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> Specifies the HTTP method to use when sending the message to the server. <phrase condition="ose">Available in <entity>abbrev</entity> version 3.7.2 and newer.</phrase></p>

<simplesect>
<MadCap:snippetBlock src="../../shared/chunk/option-destination-retries.htm"></MadCap:snippetBlock>
</simplesect>
<simplesect>
<MadCap:snippetBlock src="../../shared/chunk/option-destination-template.htm"></MadCap:snippetBlock>
</simplesect>
<simplesect>
<MadCap:snippetBlock src="../../shared/chunk/option-destination-throttle.htm"></MadCap:snippetBlock>
</simplesect>
<simplesect xml:id="http-option-url">
<title>url()</title>
<indexterm type="parameter">
<primary>url()</primary>
<secondary>http</secondary>
</indexterm>
<indexterm type="parameter">
<primary>http</primary>
<secondary>url</secondary>
</indexterm>
<table cellspacing="0" class="RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">


<tbody>
<tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">Type:</td>
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">URL</td>
</tr>
<tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">Default:</td>
<td class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1"></td>
</tr>
</tbody>

<col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;"></col></table>
<p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> Specifies the hostname or IP address and optionally the port number of the web service that can receive log data via HTTP. Use a colon (<span class="Code" oldrole="userinput">:</span>) after the address to specify the port number of the server. You can also use macros, templates, and template functions in the URL, for example: <span class="Code" oldrole="userinput">http://host.example.com:8080/${MACRO1}/${MACRO2}/script")</span></p>
</simplesect>
</body></html>
