<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="10" MadCap:lastHeight="4387" MadCap:lastWidth="704">
    <body name="configure-mssql-server" oldrole="procedure">
        <h2 name="configure-mssql-server" version="5.0" xmlns="http://docbook.org/ns/docbook"> Configuring Microsoft SQL Server to accept logs from syslog-ng</h2>
        <MadCap:keyword term="destinations:['Microsoft SQL Server configuration']">
        </MadCap:keyword>
        <MadCap:keyword term="destinations:['MSSQL configuration']">
        </MadCap:keyword>
        <MadCap:keyword term="destinations:['FreeTDS configuration']">
        </MadCap:keyword>
        <MadCap:keyword term="Microsoft SQL Server configuration">
        </MadCap:keyword>
        <h6 oldrole="formalpara">Purpose</h6>
        <p oldrole="para">Complete the following steps to configure your Microsoft SQL Server to enable remote logins and accept log messages from syslog-ng.</p>
        <h6 oldrole="formalpara">Steps</h6>
        <ol oldrole="procedure">
            <li oldrole="step">
                <p oldrole="para">Start the SQL Server Management Studio application. Select <b class="UI" oldrole="guimenu">Start &gt; Programs &gt; Microsoft SQL Server 2005 &gt; SQL Server Management Studio</b>.</p>
            </li>
            <li oldrole="step">
                <p oldrole="para">Create a new database.</p>
                <ol oldrole="substeps">
                    <li oldrole="step">
                        <p class="CaptionFigure" MadCap:autonum="Figure 1: ">Creating a new MSSQL database 1.</p>
                        <p><img class="Image" contentwidth="&lt;entity&gt;screenshotsize_small&lt;/entity&gt;" fileref="../../Resources/Images_Localized/mssql-newdb-select.png" format="PNG" MadCap:mediastyle="@media print { width: auto; height: auto; }" oldrole="figure" src="../../Resources/Images_Localized/mssql-newdb-select.png" style="height: auto; width: auto;" /></p>
                        <p oldrole="para">In the Object Explorer, right-click on the <b class="UI" oldrole="guimenu">Databases</b> entry and select <b class="UI" oldrole="guimenu">New Database</b>.</p>
                    </li>
                    <li oldrole="step">
                        <p class="CaptionFigure" MadCap:autonum="Figure 2: ">Creating a new MSSQL database 2.</p>
                        <p><img class="Image" contentwidth="&lt;entity&gt;screenshotsize&lt;/entity&gt;" fileref="../../Resources/Images_Localized/mssql-newdb-create.png" format="PNG" MadCap:mediastyle="@media print { width: auto; height: auto; }" oldrole="figure" src="../../Resources/Images_Localized/mssql-newdb-create.png" style="height: auto; width: auto;" /></p>
                        <p oldrole="para">Enter the name of the new database (for example <span class="Code" oldrole="userinput">syslogng</span>) into the <b class="UI" oldrole="guimenu">Database name</b> field and click <b class="UI" oldrole="guimenu">OK</b>.</p>
                    </li>
                </ol>
            </li>
            <li oldrole="step">
                <p oldrole="para">Create a new database user and associate it with the new database.</p>
                <ol oldrole="substeps">
                    <li oldrole="step">
                        <p class="CaptionFigure" MadCap:autonum="Figure 3: ">Creating a new MSSQL user 1.</p>
                        <img class="Image" contentwidth="&lt;entity&gt;screenshotsize_small&lt;/entity&gt;" fileref="../../Resources/Images_Localized/mssql-newuser-select.png" format="PNG" MadCap:mediastyle="@media print { width: auto; height: auto; }" oldrole="figure" src="../../Resources/Images_Localized/mssql-newuser-select.png" style="height: auto; width: auto;" />
                        <p oldrole="para">In the Object Explorer, select <b class="UI" oldrole="guimenu">Security</b>, right-click on the <b class="UI" oldrole="guimenu">Logins</b> entry, then select <b class="UI" oldrole="guimenu">New Login</b>.</p>
                    </li>
                    <li oldrole="step">
                        <p class="CaptionFigure" MadCap:autonum="Figure 4: ">Creating a new MSSQL user 2.</p>
                        <img class="Image" contentwidth="&lt;entity&gt;screenshotsize&lt;/entity&gt;" fileref="../../Resources/Images_Localized/mssql-newuser-general.png" format="PNG" MadCap:mediastyle="@media print { width: auto; height: auto; }" oldrole="figure" src="../../Resources/Images_Localized/mssql-newuser-general.png" style="height: auto; width: auto;" />
                        <p oldrole="para">Enter a name (for example <span class="Code" oldrole="userinput">syslog-ng</span>) for the user into the <b class="UI" oldrole="guimenu">Login name</b> field.</p>
                    </li>
                    <li oldrole="step">
                        <p oldrole="para">Select the <b class="UI" oldrole="guimenu">SQL Server Authentication</b> option and enter a password for the user.</p>
                    </li>
                    <li oldrole="step">
                        <p oldrole="para">In the <b class="UI" oldrole="guimenu">Default database</b> field, select the database created in Step 2 (for example <span class="Code" oldrole="userinput">syslogng</span>).</p>
                    </li>
                    <li oldrole="step">
                        <p oldrole="para">In the <b class="UI" oldrole="guimenu">Default language</b> field, select the language of log messages that you want to store in the database, then click <b class="UI" oldrole="guimenu">OK</b>.</p>
                        <table cellspacing="0" class="TableStyle-NoteTable_Yellow_DoNotEdit" oldrole="warning" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css');">
                            <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column1" style="width: 0.3in;">
                            </col>
                            <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column2">
                            </col>
                            <tbody>
                                <tr class="TableStyle-NoteTable_Yellow_DoNotEdit-Body-Body1">
                                    <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyB-Column1-Body1">
                                        <p>
                                            <img src="../../Resources/Images/Common/caution.png" />
                                        </p>
                                    </td>
                                    <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyA-Column2-Body1"><span class="Yellow">Caution: </span>
                                        <p oldrole="para">Incorrect language settings may result in the database converting the messages to a different character-encoding format. That way the log messages may become unreadable, causing information loss.</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </li>
                    <li oldrole="step">
                        <p oldrole="para">In the Object Explorer, select <b class="UI" oldrole="guimenu">Security &gt; Logins</b>, then right-click on the new login created in the previous step, and select <b class="UI" oldrole="guimenu">Properties</b>.</p>
                    </li>
                    <li oldrole="step">
                        <p class="CaptionFigure" MadCap:autonum="Figure 5: ">Associating database with the new user</p>
                        <img class="Image" contentwidth="&lt;entity&gt;screenshotsize&lt;/entity&gt;" fileref="../../Resources/Images_Localized/mssql-newuser-setowner.png" format="PNG" MadCap:mediastyle="@media print { width: auto; height: auto; }" oldrole="figure" src="../../Resources/Images_Localized/mssql-newuser-setowner.png" style="height: auto; width: auto;" />
                        <p oldrole="para">Select <b class="UI" oldrole="guimenu">User Mapping</b>. In the <b class="UI" oldrole="guimenu">Users mapped to this login</b> option, check the line corresponding to the new login (for example <span class="Code" oldrole="userinput">syslogng</span>). In the <b class="UI" oldrole="guimenu">Database role membership</b> field, check the <b class="UI" oldrole="guimenu">db_owner</b> and <b class="UI" oldrole="guimenu">public</b> options.</p>
                    </li>
                </ol>
            </li>
            <li oldrole="step">
                <p class="CaptionFigure" MadCap:autonum="Figure 6: ">Associating database with the new user</p>
                <img class="Image" contentwidth="&lt;entity&gt;screenshotsize&lt;/entity&gt;" fileref="../../Resources/Images_Localized/mssql-newuser-login.png" format="PNG" MadCap:mediastyle="@media print { width: auto; height: auto; }" oldrole="figure" src="../../Resources/Images_Localized/mssql-newuser-login.png" style="height: auto; width: auto;" />
                <p oldrole="para">Enable remote logins for SQL users.</p>
                <p oldrole="para">In the Object Explorer right-click on your database server, and select <b class="UI" oldrole="guimenu">Properties &gt; Security</b>, and set the <b class="UI" oldrole="guimenu">Server Authentication</b> option to <b class="UI" oldrole="guimenu">SQL Server and Windows Authentication mode</b>.</p>
            </li>
        </ol>
    </body>
</html>